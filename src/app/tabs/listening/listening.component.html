<div id="quiz-container" class="mt-3">
  @if (data) {
    <div class="form-group">
      @if (isSaved || isTesting || isReadOnly) {
        <div textSelection [innerHTML]="data.name"></div>
      } @else {
        <angular-editor
          autocomplete="off"
          name="part"
          type="text"
          id="part"
          [(ngModel)]="data.name"
          [config]="config"
          required
        ></angular-editor>
      }
    </div>

    <div
      class="d-flex"
      [ngClass]="{ 'un-clickable': isTesting && !isStart }"
    >
      <div class="w-100">
        @for (question of data.questions; track $index) {
          <div class="question">
            <app-question
              [question]="question"
              [isSaved]="isSaved"
              [isEditing]="mapQuestionEditing[question.id]"
              [isReadOnly]="isReadOnly"
              [isTesting]="isTesting"
              [(selectedId)]="selectedId"
              [(selectedQuestionIndex)]="selectedQuestionIndex"
              (onSave)="onSaveClick()"
              (onAnswer)="onPartAnswerQuestion.emit($event)"
              (onAnswerChoice)="onPartAnswerChoice.emit($event)"
            ></app-question>
            <div class="actions">
              @if (!isSaved && !isTesting && !isReadOnly) {
                @if (mapQuestionEditing[question.id]) {
                  <button
                    mat-button
                    color="primary"
                    type="button"
                    (click)="onSaveQuestion(question.id)"
                  >
                    <mat-icon>save</mat-icon>
                  </button>
                } @else {
                  <button
                    mat-button
                    color="primary"
                    type="button"
                    (click)="onEditQuestion(question.id)"
                  >
                    <mat-icon>edit</mat-icon>
                  </button>
                }
                <button
                  mat-button
                  type="button"
                  (click)="duplicateQuestion(question)"
                >
                  <mat-icon>content_copy</mat-icon>
                </button>
                <button
                  mat-button
                  color="warn"
                  type="button"
                  (click)="removeQuestion($index)"
                >
                  <mat-icon>delete</mat-icon>
                </button>
                @if ($index !== 0) {
                  <button
                    mat-button
                    type="button"
                    (click)="moveQuestionUp($index)"
                  >
                    <mat-icon>arrow_upward</mat-icon>
                  </button>
                }
                @if ($index !== data.questions.length - 1) {
                  <button
                    mat-button
                    type="button"
                    (click)="moveQuestionDown($index)"
                  >
                    <mat-icon>arrow_downward</mat-icon>
                  </button>
                }
              }
            </div>
          </div>
        }
      </div>

    </div>

    @if (!isSaved && !isTesting && !isReadOnly) {
      <div class="d-flex mt-2">
        <button
          mat-raised-button
          (click)="addQuestion(questionType.MULTIPLE_CHOICE)"
        >
          Multiple Choices
        </button>
        <!--        <button-->
        <!--          class="ms-1"-->
        <!--          mat-raised-button-->
        <!--          (click)="addQuestion(1)"-->
        <!--        >-->
        <!--          <mat-icon>add</mat-icon>-->
        <!--          Short Answer-->
        <!--        </button>-->
        <button
          class="ms-1"
          mat-raised-button
          (click)="addQuestion(questionType.DROPDOWN_ANSWER)"
        >
          Dropdown Choices
        </button>
        <button
          class="ms-1"
          mat-raised-button
          (click)="addQuestion(questionType.LABEL_ON_MAP)"
        >
          Label On Map
        </button>
        <button
          class="ms-1"
          mat-raised-button
          (click)="addQuestion(questionType.FILL_IN_THE_GAP)"
        >
          Fill In The Gap
        </button>
        <button
          class="ms-1"
          mat-raised-button
          (click)="addQuestion(questionType.DRAG_AND_DROP_ANSWER)"
        >
          Drag And Drop
        </button>
        <button
          class="ms-1"
          mat-raised-button
          (click)="addQuestion(questionType.FILL_IN_THE_TABLE)"
        >
          Fill In The Table
        </button>
        <button
          class="ms-1"
          mat-raised-button
          (click)="addQuestion(questionType.DRAG_IN_TABLE)"
        >
          Drag In The Table
        </button>
      </div>
    }
  }
</div>
